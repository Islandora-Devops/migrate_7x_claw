langcode: en
status: true
dependencies:
  enforced:
    module:
      - migrate_7x_claw
      - migrate_plus
      - islandora
id: islandora_basic_image_audit
class: null
field_plugin_method: null
cck_plugin_method: null
migration_tags: null
migration_group: islandora_7x
label: 'Basic Image Objects AUDIT'
source:
  plugin: islandora
  solr_base_url: 'http://192.168.0.120:8080/solr'
  fedora_base_url: 'http://192.168.0.120:8080/fedora'
  data_fetcher_plugin: http
  authentication:
    plugin: basic
    username: fedoraAdmin
    password: fedoraAdmin
  content_model_field: RELS_EXT_hasModel_uri_ms
  content_model: 'islandora:sp_basic_image'
  data_parser_plugin: authenticated_xml
  item_selector: '/foxml:digitalObject'
  constants:
    destination_directory: 'fedora://masters'
    extension: xml
    fedora_base_url: 'http://192.168.0.120:8080/fedora'
    objects_string: objects
    export_suffix: export
    creator_uid: 1
  fields:
    -
      name: PID
      label: PID
      selector: '@PID'
    -
  ids:
    PID:
      type: string

process:
  plugin: audit_trail
  digital_id:
    plugin: str_replace
    source: PID_AUDIT
    search: ':'
    replace: _
  field_media_of:
    plugin: migration_lookup
    migration: islandora_basic_image
    source: PID
no_stub: true

destination:
  plugin: 'entity:file'
  uri: '/tmp/PID_AUDIT.xml'
  default_bundle: image
migration_dependencies: null
